{
  "version": 3,
  "sources": ["..\\src\\lib\\ericchase\\Algorithm\\Sleep.ts", "..\\src\\lib\\ericchase\\Design Pattern\\Observer\\Broadcast.ts", "..\\src\\lib\\ericchase\\Web API\\Node_Utility.ts", "..\\src\\lib\\commands.ts", "..\\src\\index.bundle.ts"],
  "sourcesContent": [
    "export async function Sleep(ms: number) {\n  await new Promise((resolve) => setTimeout(resolve, ms));\n}\n",
    "export type SubscriptionCallback<Value> = (value: Value, unsubscribe: () => void) => void;\n\nexport class Broadcast<Value> {\n  protected subscriptionSet = new Set<SubscriptionCallback<Value>>();\n  subscribe(callback: SubscriptionCallback<Value>): () => void {\n    this.subscriptionSet.add(callback);\n    return () => {\n      this.subscriptionSet.delete(callback);\n    };\n  }\n  wait(untilValue: Value): Promise<void> {\n    return new Promise<void>((resolve) => {\n      this.subscribe((value, unsubscribe) => {\n        if (value === untilValue) {\n          unsubscribe();\n          resolve();\n        }\n      });\n    });\n  }\n  send(value: Value): void {\n    for (const callback of this.subscriptionSet) {\n      callback(value, () => {\n        this.subscriptionSet.delete(callback);\n      });\n    }\n  }\n  sendAndWait(value: Value, untilValue: Value): Promise<void> {\n    const _ = this.wait(untilValue);\n    this.send(value);\n    return _;\n  }\n}\n",
    "export class CNodeRef {\n  node: Node;\n\n  constructor(node?: Node | null) {\n    if (node === null) {\n      throw new ReferenceError('Reference is null.');\n    }\n    if (node === undefined) {\n      throw new ReferenceError('Reference is undefined.');\n    }\n    this.node = node;\n  }\n\n  as<T extends abstract new (...args: any) => any>(constructor_ref: T): InstanceType<T> {\n    if (this.node instanceof constructor_ref) return this.node as InstanceType<T>;\n    throw new TypeError(`Reference node is not ${constructor_ref}`);\n  }\n  is<T extends abstract new (...args: any) => any>(constructor_ref: T): boolean {\n    return this.node instanceof constructor_ref;\n  }\n  passAs<T extends abstract new (...args: any) => any>(constructor_ref: T, fn: (reference: InstanceType<T>) => void): void {\n    if (this.node instanceof constructor_ref) {\n      fn(this.node as InstanceType<T>);\n    }\n  }\n  tryAs<T extends abstract new (...args: any) => any>(constructor_ref: T): InstanceType<T> | undefined {\n    if (this.node instanceof constructor_ref) {\n      return this.node as InstanceType<T>;\n    }\n  }\n\n  get classList() {\n    return this.as(HTMLElement).classList;\n  }\n  get className() {\n    return this.as(HTMLElement).className;\n  }\n  get style() {\n    return this.as(HTMLElement).style;\n  }\n\n  getAttribute(qualifiedName: string): string | null {\n    return this.as(HTMLElement).getAttribute(qualifiedName);\n  }\n  setAttribute(qualifiedName: string, value: string): void {\n    this.as(HTMLElement).setAttribute(qualifiedName, value);\n  }\n  getStyleProperty(property: string): string {\n    return this.as(HTMLElement).style.getPropertyValue(property);\n  }\n  setStyleProperty(property: string, value: string | null, priority?: string): void {\n    this.as(HTMLElement).style.setProperty(property, value, priority);\n  }\n}\nexport function NodeRef(node?: Node | null): CNodeRef {\n  return new CNodeRef(node);\n}\n\nexport class CNodeListRef extends Array<CNodeRef> {\n  constructor(nodes?: NodeList | Node[] | null) {\n    if (nodes === null) {\n      throw new ReferenceError('Reference list is null.');\n    }\n    if (nodes === undefined) {\n      throw new ReferenceError('Reference list is undefined.');\n    }\n    super();\n    for (const node of Array.from(nodes)) {\n      try {\n        this.push(new CNodeRef(node));\n      } catch (_) {}\n    }\n  }\n\n  as<T extends abstract new (...args: any) => any>(constructor_ref: T): Array<InstanceType<T>> {\n    return this.filter((ref) => ref.is(constructor_ref)).map((ref) => ref.as(constructor_ref));\n  }\n\n  passEachAs<T extends abstract new (...args: any) => any>(constructor_ref: T, fn: (reference: InstanceType<T>) => void): void {\n    for (const ref of this) {\n      ref.passAs(constructor_ref, fn);\n    }\n  }\n}\nexport function NodeListRef(nodes?: NodeList | Node[] | null): CNodeListRef {\n  return new CNodeListRef(nodes);\n}\n\n// API designed by NOOB (https://github.com/NOOB2868)\nexport function SelectElements(...selectors: string[]) {\n  return NodeListRef(document.querySelectorAll(selectors.join(',')));\n}\n",
    "import { Sleep } from './ericchase/Algorithm/Sleep.js';\nimport { Broadcast } from './ericchase/Design Pattern/Observer/Broadcast.js';\nimport { NodeRef, type CNodeRef } from './ericchase/Web API/Node_Utility.js';\n\nconst karel = NodeRef(document.querySelector('#karel'));\n// const scene = NodeRef(document.querySelector('#scene')).as(HTMLElement);\n\nfunction drawKarel() {\n  karel.style.left = `${4 + 4 + karel_x * 69}px`; // border + missing width/2\n  karel.style.top = `${4 + 4 + karel_y * 69}px`; // border + missing height/2\n}\n\nconst domParser = new DOMParser();\nconst parseHTML = (html: string) => {\n  return domParser.parseFromString(html, 'text/html');\n};\n\nexport function createBall(x: number, y: number) {\n  const ball = addBall(NodeRef(parseHTML(`<div class=\"entity ball\"><img src=\"./assets/ball.png\" alt=\"ball\" /></div>`).body.children[0]), x, y);\n  karel.as(HTMLElement).before(ball.as(HTMLElement));\n  ball.style.left = `${4 + 5 + x * 69}px`; // border + missing width/2\n  ball.style.top = `${4 + 5 + y * 69}px`; // border + missing height/2\n}\nexport function createFence(x: number, y: number) {\n  const fence = addFence(NodeRef(parseHTML(`<div class=\"entity fence\"><img src=\"./assets/fence.png\" alt=\"fence\" /></div>`).body.children[0]), x, y);\n  karel.as(HTMLElement).before(fence.as(HTMLElement));\n  fence.style.left = `${4 + 1 + x * 69}px`; // border + missing width/2\n  fence.style.top = `${4 + 0 + y * 69}px`; // border + missing height/2\n}\n\nconst onUpdate = new Broadcast<void>();\nonUpdate.subscribe(() => {\n  drawKarel();\n});\n\nexport let karel_x = 0;\nexport let karel_y = 0;\nexport let karel_facing: 'east' | 'north' | 'south' | 'west' = 'east';\n\nconst delay = 250;\nconst ballPosition = new Map<string, CNodeRef>();\nconst fencePosition = new Map<string, CNodeRef>();\n\nfunction xy(x: number, y: number) {\n  return JSON.stringify({ x, y });\n}\n\n// ballPosition.get(xy(x, y));\n// ballPosition.set(xy(x, y), data);\n// ballPosition.delete(xy(x, y));\n\nexport function facingEast() {}\nexport function facingNorth() {}\nexport function facingSouth() {}\nexport function facingWest() {}\nexport function frontIsBlocked() {\n  return !frontIsClear();\n}\nexport function frontIsClear() {\n  if (facingFence()) {\n    return false;\n  }\n  switch (karel_facing) {\n    case 'north':\n      if (karel_y === 0) return false;\n      break;\n    case 'south':\n      if (karel_y === 9) return false;\n      break;\n    case 'west':\n      if (karel_x === 0) return false;\n      break;\n    case 'east':\n      if (karel_x === 9) return false;\n      break;\n  }\n  return true;\n}\nexport function leftIsBlocked() {}\nexport function leftIsClear() {}\nexport function notFacingEast() {}\nexport function notFacingNorth() {}\nexport function notFacingSouth() {}\nexport function notFacingWest() {}\nexport function rightIsBlocked() {}\nexport function rightIsClear() {}\nexport async function turnLeft() {\n  await Sleep(delay / 2);\n  switch (karel_facing) {\n    case 'north':\n      karel_facing = 'west';\n      karel.style.transform = 'rotate(180deg)';\n      break;\n    case 'south':\n      karel_facing = 'east';\n      karel.style.transform = 'rotate(0deg)';\n      break;\n    case 'west':\n      karel_facing = 'south';\n      karel.style.transform = 'rotate(90deg)';\n      break;\n    case 'east':\n      karel_facing = 'north';\n      karel.style.transform = 'rotate(270deg)';\n      break;\n  }\n  await Sleep(delay / 2);\n}\nexport async function turnRight() {\n  await Sleep(delay / 2);\n  switch (karel_facing) {\n    case 'north':\n      karel_facing = 'east';\n      karel.style.transform = 'rotate(0deg)';\n      break;\n    case 'south':\n      karel_facing = 'west';\n      karel.style.transform = 'rotate(180deg)';\n      break;\n    case 'west':\n      karel_facing = 'north';\n      karel.style.transform = 'rotate(270deg)';\n      break;\n    case 'east':\n      karel_facing = 'south';\n      karel.style.transform = 'rotate(90deg)';\n      break;\n  }\n  await Sleep(delay / 2);\n}\n\nexport function addBall(ball: CNodeRef, x: number, y: number) {\n  const ref = ballPosition.get(xy(x, y));\n  if (ref) return ref;\n  ballPosition.set(xy(x, y), ball);\n  return ball;\n}\nexport function ballsPresent() {\n  return ballPosition.get(xy(karel_x, karel_y));\n}\nexport function noBallsPresent() {\n  return !ballsPresent();\n}\nexport async function takeBall() {\n  const ref = ballPosition.get(xy(karel_x, karel_y));\n  if (ref) {\n    ballPosition.delete(xy(karel_x, karel_y));\n    await Sleep(delay);\n    ref.as(Element).remove();\n  } else {\n    throw 'There is no ball!';\n  }\n}\n\nexport function addFence(fence: CNodeRef, x: number, y: number) {\n  const ref = fencePosition.get(xy(x, y));\n  if (ref) return ref;\n  fencePosition.set(xy(x, y), fence);\n  return fence;\n}\nexport function facingFence() {\n  switch (karel_facing) {\n    // case 'north':\n    //   if (fencePosition.get(xy(karel_x, karel_y - 1))) return true;\n    //   break;\n    // case 'south':\n    //   if (fencePosition.get(xy(karel_x, karel_y + 1))) return true;\n    //   break;\n    case 'west':\n      if (fencePosition.get(xy(karel_x - 1, karel_y))) return true;\n      break;\n    case 'east':\n      if (fencePosition.get(xy(karel_x + 1, karel_y))) return true;\n      break;\n  }\n  return false;\n}\n\nexport async function start(x: number, y: number) {\n  karel_x = x;\n  karel_y = y;\n  onUpdate.send();\n}\n\nexport async function move() {\n  if (frontIsClear() === false) {\n    throw 'Karel ran into something!';\n  }\n  switch (karel_facing) {\n    case 'north':\n      karel_y -= 1;\n      break;\n    case 'south':\n      karel_y += 1;\n      break;\n    case 'west':\n      karel_x -= 1;\n      break;\n    case 'east':\n      karel_x += 1;\n      break;\n  }\n  await Sleep(delay);\n  onUpdate.send();\n}\n",
    "import { ballsPresent, createFence, facingFence, frontIsBlocked, move, start, takeBall, turnLeft, turnRight } from './lib/commands.js';\n\n// setup scene\n\ncreateFence(1, 9);\ncreateFence(4, 9);\ncreateFence(5, 9);\ncreateFence(8, 9);\ncreateFence(9, 9);\n\n// steps\n\nawait start(0, 9);\nwhile (true) {\n  if (ballsPresent()) {\n    await takeBall();\n  }\n  if (facingFence()) {\n    await turnLeft();\n    await move();\n    await turnRight();\n    await move();\n    await turnRight();\n    await move();\n    await turnLeft();\n  } else if (frontIsBlocked()) {\n    break;\n  } else {\n    await move();\n  }\n}\nconsole.log('ended');\n"
  ],
  "mappings": "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",
  "debugId": "334F0D7D6B54FE4164756E2164756E21",
  "names": []
}